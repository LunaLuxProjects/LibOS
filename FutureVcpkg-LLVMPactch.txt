cmake_host_system_information(RESULT MEMORY QUERY AVAILABLE_PHYSICAL_MEMORY)

#this is calculated in mib to gb
if(MEMORY GREATER_EQUAL "6675.72")
    set(LLVM_LINK_JOBS 2)
endif()
if(MEMORY GREATER_EQUAL "14305.11")
    set(LLVM_LINK_JOBS 3)
endif()
if(MEMORY GREATER_EQUAL "29563.9")
    set(LLVM_LINK_JOBS 4)
endif()
if(MEMORY GREATER_EQUAL "60081.48")
    set(LLVM_LINK_JOBS 5)
endif()